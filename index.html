<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üá©üá™ Nauka s≈Ç√≥w niemieckich</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        input {
            flex: 1;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border 0.3s;
        }

        input:focus {
            outline: none;
            border-color: #667eea;
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102,126,234,0.4);
        }

        .btn-secondary {
            background: #48bb78;
            color: white;
        }

        .btn-secondary:hover {
            background: #38a169;
        }

        .btn-danger {
            background: #f56565;
            color: white;
            padding: 8px 12px;
        }

        .btn-danger:hover {
            background: #e53e3e;
        }

        .btn-outline {
            background: white;
            border: 2px solid #667eea;
            color: #667eea;
        }

        .btn-outline:hover {
            background: #667eea;
            color: white;
        }

        .word-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: #f7fafc;
            border-radius: 8px;
            margin-bottom: 10px;
            border: 1px solid #e2e8f0;
        }

        .word-item:hover {
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .word-text {
            font-size: 18px;
        }

        .word-german {
            font-weight: bold;
            color: #2d3748;
        }

        .word-polish {
            color: #4a5568;
        }

        .stats {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .success-rate {
            font-weight: bold;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 14px;
        }

        .rate-high { background: #c6f6d5; color: #22543d; }
        .rate-medium { background: #fef3c7; color: #78350f; }
        .rate-low { background: #fed7d7; color: #742a2a; }

        .flashcard {
            height: 400px;
            perspective: 1000px;
            cursor: pointer;
            margin-bottom: 20px;
        }

        .flashcard-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .flashcard.flipped .flashcard-inner {
            transform: rotateY(180deg);
        }

        .flashcard-front, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 15px;
            padding: 40px;
        }

        .flashcard-front {
            background: white;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .flashcard-back {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: rotateY(180deg);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .flashcard-word {
            font-size: 3em;
            font-weight: bold;
            margin: 20px 0;
        }

        .flashcard-label {
            font-size: 1em;
            opacity: 0.7;
            margin-bottom: 10px;
        }

        .navigation {
            display: flex;
            gap: 15px;
        }

        .navigation button {
            flex: 1;
        }

        .mode-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .mode-buttons button {
            padding: 20px;
            font-size: 18px;
        }

        .quiz-card {
            text-align: center;
        }

        .question {
            background: #f7fafc;
            padding: 40px;
            border-radius: 12px;
            margin-bottom: 30px;
        }

        .question-lang {
            font-size: 1.2em;
            color: #718096;
            margin-bottom: 15px;
        }

        .question-text {
            font-size: 3em;
            font-weight: bold;
            color: #2d3748;
        }

        .result {
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .result.correct {
            background: #c6f6d5;
            border: 2px solid #48bb78;
        }

        .result.wrong {
            background: #fed7d7;
            border: 2px solid #f56565;
        }

        .result-title {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .result.correct .result-title { color: #22543d; }
        .result.wrong .result-title { color: #742a2a; }

        .hidden {
            display: none;
        }

        .header-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .unknown-badge {
            background: #fed7aa;
            color: #7c2d12;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            margin-left: 10px;
        }

        .unknown-section {
            border: 2px solid #fb923c;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2em;
            }
            
            .flashcard-word {
                font-size: 2em;
            }
            
            .question-text {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üá©üá™ Nauka s≈Ç√≥w niemieckich</h1>

        <!-- Dodawanie s≈Ç√≥w -->
        <div id="addMode" class="card">
            <h2 style="margin-bottom: 20px; color: #2d3748;">Dodaj nowe s≈Çowo</h2>
            <div class="input-group">
                <input type="text" id="germanInput" placeholder="S≈Çowo niemieckie">
                <input type="text" id="polishInput" placeholder="T≈Çumaczenie polskie">
                <button class="btn-primary" onclick="addWord()">‚ûï Dodaj</button>
            </div>
        </div>

        <!-- Lista nieznanych s≈Ç√≥w -->
        <div id="unknownSection" class="card unknown-section hidden">
            <h2 style="color: #c2410c; margin-bottom: 15px;">‚ùì Nie znam (<span id="unknownCount">0</span>)</h2>
            <div id="unknownList"></div>
        </div>

        <!-- Lista wszystkich s≈Ç√≥w -->
        <div id="wordListSection" class="card">
            <h2 style="margin-bottom: 20px; color: #2d3748;">Wszystkie s≈Çowa (<span id="wordCount">0</span>)</h2>
            <div id="wordList"></div>
        </div>

        <!-- Przyciski tryb√≥w -->
        <div id="modeButtons" class="mode-buttons hidden">
            <button class="btn-primary" onclick="startMode('flashcards')">üìö Fiszki</button>
            <button class="btn-primary" onclick="startMode('quiz-de-pl')">‚úçÔ∏è DE ‚Üí PL</button>
            <button class="btn-secondary" onclick="startMode('quiz-pl-de')">‚úçÔ∏è PL ‚Üí DE</button>
        </div>

        <!-- Fiszki -->
        <div id="flashcardsMode" class="hidden">
            <div class="header-nav">
                <button class="btn-outline" onclick="backToMain()">‚Üê Powr√≥t</button>
                <button class="btn-outline" onclick="toggleUnknownFilter()">
                    <span id="filterText">Wszystkie s≈Çowa</span>
                </button>
                <span id="flashcardCounter" style="color: white; font-weight: bold; font-size: 1.2em;"></span>
            </div>
            <div class="flashcard" id="flashcard" onclick="flipCard()">
                <div class="flashcard-inner">
                    <div class="flashcard-front">
                        <div class="flashcard-label">Polski</div>
                        <div class="flashcard-word" id="flashcardPolish"></div>
                        <div class="flashcard-label" style="margin-top: 20px; opacity: 0.5;">Kliknij aby odwr√≥ciƒá</div>
                    </div>
                    <div class="flashcard-back">
                        <div class="flashcard-label">Deutsch</div>
                        <div class="flashcard-word" id="flashcardGerman"></div>
                        <div id="flashcardStats" style="margin-top: 20px; opacity: 0.8;"></div>
                    </div>
                </div>
            </div>
            <div class="navigation">
                <button class="btn-outline" onclick="previousCard()">‚Üê Poprzednia</button>
                <button class="btn-primary" onclick="nextCard()">Nastƒôpna ‚Üí</button>
            </div>
        </div>

        <!-- Quiz -->
        <div id="quizMode" class="hidden">
            <div class="header-nav">
                <button class="btn-outline" onclick="backToMain()">‚Üê Powr√≥t</button>
                <button class="btn-outline" onclick="toggleUnknownFilter()">
                    <span id="filterTextQuiz">Wszystkie s≈Çowa</span>
                </button>
                <span id="quizCounter" style="color: white; font-weight: bold; font-size: 1.2em;"></span>
            </div>
            <div class="card quiz-card">
                <div id="quizDirectionLabel" style="font-size: 1.5em; font-weight: bold; color: #667eea; margin-bottom: 20px;"></div>
                <div class="question">
                    <div class="question-lang" id="questionLang"></div>
                    <div class="question-text" id="questionText"></div>
                </div>
                <div id="answerSection">
                    <input type="text" id="answerInput" placeholder="Wpisz t≈Çumaczenie..." style="width: 100%; margin-bottom: 15px; font-size: 1.2em;">
                    <div style="display: flex; gap: 10px;">
                        <button class="btn-primary" onclick="checkAnswer()" style="flex: 1; padding: 15px; font-size: 1.1em;">Sprawd≈∫</button>
                        <button class="btn-outline" onclick="markUnknown()" style="padding: 15px;">‚ùì</button>
                    </div>
                </div>
                <div id="resultSection" class="hidden">
                    <div id="resultBox" class="result"></div>
                    <button class="btn-primary" onclick="nextQuiz()" style="width: 100%; padding: 15px; font-size: 1.1em;">Nastƒôpne s≈Çowo ‚Üí</button>
                </div>
                <div id="quizStats" style="margin-top: 20px; color: #718096;"></div>
            </div>
        </div>
    </div>

    <script>
        let words = [];
        let unknownWords = [];
        let currentIndex = 0;
        let currentMode = 'add';
        let quizMode = '';
        let isFlipped = false;
        let showUnknownOnly = false;
        let shuffledWords = [];

        // PoczƒÖtkowe s≈Çowa
        const initialWords = [
            { german: 'hingehen', polish: 'p√≥j≈õƒá' },
            { german: 'Gespr√§ch', polish: 'rozmowa' },
            { german: 'der Blick', polish: 'widok' },
            { german: 'Weltall', polish: 'wszech≈õwiat' },
            { german: 'riesigen', polish: 'olbrzymi' },
            { german: 'M√ºlldeponien', polish: 'wysypisko ≈õmieci' },
            { german: 'erkennen', polish: 'rozpoznaƒá' },
            { german: 'Altkleider', polish: 'stare ubrania' },
            { german: 'Sperrm√ºll', polish: 'odpady wielkogabarytowe' },
            { german: 'Menge', polish: 'ilo≈õƒá' },
            { german: 'erzeugen', polish: 'wytwarzaƒá' },
            { german: 'Kohle', polish: 'wƒôgiel' },
            { german: 'Fahrzeug', polish: 'pojazd' },
            { german: 'Kohlendioxid', polish: 'dwutlenek wƒôgla' },
            { german: 'verbrauchen', polish: 'zu≈ºywaƒá' },
            { german: 'Trinkwasser', polish: 'woda pitna' },
            { german: 'ben√∂tigen', polish: 'potrzebowaƒá' },
            { german: 'Ger√§te', polish: 'urzƒÖdzenia' },
            { german: 'die Zucht', polish: 'hodowla' },
            { german: 'der Rinder', polish: 'byd≈Ço' },
            { german: 'atmen', polish: 'oddychaƒá' },
            { german: 'Treibhausgas', polish: 'gaz cieplarniany' },
            { german: 'auf dem Weg', polish: 'na drodze' },
            { german: 'beuten', polish: 'wykorzystywaƒá' },
            { german: 'Umwelt', polish: '≈õrodowisko' },
            { german: '√§ndern', polish: 'zmieniaƒá' },
            { german: 'retten', polish: 'ratowaƒá' },
            { german: 'der Wald', polish: 'las' },
            { german: 'das Meer', polish: 'morze' },
            { german: 'die Atmosph√§re', polish: 'atmosfera' },
            { german: 'Kraftwerk', polish: 'elektrownia' },
            { german: 'ausatmen', polish: 'wydychaƒá' },
            { german: 'ausbeuten', polish: 'wykorzystywaƒá' },
            { german: 'M√ºll produzieren', polish: 'produkcja ≈õmieci' },
            { german: 'die W√§lder zerst√∂ren', polish: 'niszczyƒá lasy' },
            { german: 'Energie in Atom und Kohlenkraftwerken erzeugen', polish: 'wytwarzaƒá energiƒô w elektrowniach atomowych i wƒôglowych' },
            { german: 'heizen', polish: 'ogrzewaƒá wƒôgliem' },
            { german: 'blasen', polish: 'wydmuchiwaƒá' },
            { german: 'zerst√∂ren', polish: 'niszczyƒá' },
            { german: 'die Ursache', polish: 'przyczyna' },
            { german: 'die Folge', polish: 'skutek, nastƒôpstwo' },
            { german: 'bequem', polish: 'wygodny' },
            { german: 'hungern', polish: 'g≈Çodowaƒá' },
            { german: 'dursten', polish: 'pragnienie' },
            { german: 'Nordpol', polish: 'biegun p√≥≈Çnocny' },
            { german: 'aussterben', polish: 'wymieraƒá' },
            { german: 'Tiere', polish: 'zwierzƒôta' },
            { german: 'verdorren', polish: 'usychaƒá' },
            { german: 'Wohlstand', polish: 'dobrobyt' },
            { german: 'Umweltschutz', polish: 'ochrona ≈õrodowiska' },
            { german: 'umweltfreundlich', polish: 'przyjazny dla ≈õrodowiska' },
            { german: 'umweltfeindlich', polish: 'szkodliwy dla ≈õrodowiska' },
            { german: 'Klimawandel', polish: 'zmiana klimatu' },
            { german: 'Umweltverschmutzung', polish: 'zanieczyszczenie ≈õrodowiska' }
        ];

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
        function loadData() {
            const savedWords = localStorage.getItem('germanWords');
            const savedUnknown = localStorage.getItem('unknownWords');
            
            if (savedWords) {
                words = JSON.parse(savedWords);
            } else {
                // –ï—Å–ª–∏ –Ω–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —Å–ª–æ–≤, –∑–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–µ
                words = initialWords.map((word, index) => ({
                    id: Date.now() + index,
                    german: word.german,
                    polish: word.polish,
                    correct: 0,
                    wrong: 0
                }));
                saveData();
            }
            
            if (savedUnknown) unknownWords = JSON.parse(savedUnknown);
            
            updateDisplay();
        }

        function saveData() {
            localStorage.setItem('germanWords', JSON.stringify(words));
            localStorage.setItem('unknownWords', JSON.stringify(unknownWords));
        }

        function addWord() {
            const german = document.getElementById('germanInput').value.trim();
            const polish = document.getElementById('polishInput').value.trim();
            
            if (german && polish) {
                words.push({
                    id: Date.now(),
                    german: german,
                    polish: polish,
                    correct: 0,
                    wrong: 0
                });
                
                document.getElementById('germanInput').value = '';
                document.getElementById('polishInput').value = '';
                
                saveData();
                updateDisplay();
            }
        }

        function deleteWord(id) {
            words = words.filter(w => w.id !== id);
            unknownWords = unknownWords.filter(uid => uid !== id);
            saveData();
            updateDisplay();
        }

        function toggleUnknownFilter() {
            showUnknownOnly = !showUnknownOnly;
            currentIndex = 0;
            
            // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –∑–∞–Ω–æ–≤–æ –ø—Ä–∏ —Å–º–µ–Ω–µ —Ñ–∏–ª—å—Ç—Ä–∞
            if (showUnknownOnly) {
                const unknownFiltered = words.filter(w => unknownWords.includes(w.id));
                shuffledWords = shuffleArray(unknownFiltered);
            } else {
                shuffledWords = shuffleArray(words);
            }
            
            const filterText = document.getElementById('filterText');
            const filterTextQuiz = document.getElementById('filterTextQuiz');
            const text = showUnknownOnly ? 'Tylko nie znam' : 'Wszystkie s≈Çowa';
            
            if (filterText) filterText.textContent = text;
            if (filterTextQuiz) filterTextQuiz.textContent = text;
            
            if (currentMode === 'flashcards') {
                showFlashcard();
            } else if (currentMode.startsWith('quiz')) {
                showQuizQuestion();
            }
        }

        function getFilteredWords() {
            if (showUnknownOnly) {
                return shuffledWords.filter(w => unknownWords.includes(w.id));
            }
            return shuffledWords;
        }

        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function updateDisplay() {
            document.getElementById('wordCount').textContent = words.length;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö
            const unknownList = words.filter(w => unknownWords.includes(w.id));
            document.getElementById('unknownCount').textContent = unknownList.length;
            
            if (unknownList.length > 0) {
                document.getElementById('unknownSection').classList.remove('hidden');
                document.getElementById('unknownList').innerHTML = unknownList.map(word => `
                    <div class="word-item">
                        <div class="word-text">
                            <span class="word-german">${word.german}</span>
                            <span style="color: #cbd5e0; margin: 0 10px;">‚Üí</span>
                            <span class="word-polish">${word.polish}</span>
                        </div>
                        <button class="btn-secondary" style="padding: 8px 12px;" onclick="removeFromUnknown(${word.id})">‚úì</button>
                    </div>
                `).join('');
            } else {
                document.getElementById('unknownSection').classList.add('hidden');
            }
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö —Å–ª–æ–≤
            const sortedWords = [...words].sort((a, b) => {
                const rateA = getSuccessRate(a);
                const rateB = getSuccessRate(b);
                return rateA - rateB;
            });
            
            document.getElementById('wordList').innerHTML = sortedWords.map(word => {
                const rate = getSuccessRate(word);
                const total = word.correct + word.wrong;
                let rateClass = 'rate-low';
                if (rate >= 70) rateClass = 'rate-high';
                else if (rate >= 40) rateClass = 'rate-medium';
                
                return `
                    <div class="word-item">
                        <div class="word-text">
                            <span class="word-german">${word.german}</span>
                            <span style="color: #cbd5e0; margin: 0 10px;">‚Üí</span>
                            <span class="word-polish">${word.polish}</span>
                            ${unknownWords.includes(word.id) ? '<span class="unknown-badge">Nie znam</span>' : ''}
                        </div>
                        <div class="stats">
                            <span class="success-rate ${rateClass}">
                                ${total > 0 ? rate + '%' : 'Nowe'}
                            </span>
                            <button class="btn-danger" onclick="deleteWord(${word.id})">üóëÔ∏è</button>
                        </div>
                    </div>
                `;
            }).join('');
            
            // –ü–æ–∫–∞–∑ –∫–Ω–æ–ø–æ–∫ —Ä–µ–∂–∏–º–æ–≤
            if (words.length > 0) {
                document.getElementById('modeButtons').classList.remove('hidden');
            } else {
                document.getElementById('modeButtons').classList.add('hidden');
            }
        }

        function getSuccessRate(word) {
            const total = word.correct + word.wrong;
            return total > 0 ? Math.round((word.correct / total) * 100) : 0;
        }

        function removeFromUnknown(id) {
            unknownWords = unknownWords.filter(uid => uid !== id);
            saveData();
            updateDisplay();
        }

        function markUnknown() {
            const filtered = getFilteredWords();
            const current = filtered[currentIndex];
            
            if (!unknownWords.includes(current.id)) {
                unknownWords.push(current.id);
                saveData();
            }
            
            nextQuiz();
        }

        function startMode(mode) {
            currentMode = mode;
            currentIndex = 0;
            isFlipped = false;
            showUnknownOnly = false;
            
            // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º —Å–ª–æ–≤–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Ä–µ–∂–∏–º–∞
            shuffledWords = shuffleArray(words);
            
            document.getElementById('addMode').classList.add('hidden');
            document.getElementById('wordListSection').classList.add('hidden');
            document.getElementById('unknownSection').classList.add('hidden');
            document.getElementById('modeButtons').classList.add('hidden');
            
            if (mode === 'flashcards') {
                document.getElementById('flashcardsMode').classList.remove('hidden');
                showFlashcard();
            } else if (mode.startsWith('quiz')) {
                quizMode = mode;
                document.getElementById('quizMode').classList.remove('hidden');
                
                const label = mode === 'quiz-de-pl' ? 'üá©üá™ DE ‚Üí üáµüá± PL' : 'üáµüá± PL ‚Üí üá©üá™ DE';
                document.getElementById('quizDirectionLabel').textContent = label;
                
                showQuizQuestion();
            }
        }

        function backToMain() {
            currentMode = 'add';
            showUnknownOnly = false;
            
            document.getElementById('flashcardsMode').classList.add('hidden');
            document.getElementById('quizMode').classList.add('hidden');
            document.getElementById('addMode').classList.remove('hidden');
            document.getElementById('wordListSection').classList.remove('hidden');
            document.getElementById('modeButtons').classList.remove('hidden');
            
            updateDisplay();
        }

        function showFlashcard() {
            const filtered = getFilteredWords();
            if (filtered.length === 0) return;
            
            const word = filtered[currentIndex];
            document.getElementById('flashcardPolish').textContent = word.polish;
            document.getElementById('flashcardGerman').textContent = word.german;
            document.getElementById('flashcardStats').textContent = `Dobrze: ${word.correct} | ≈πle: ${word.wrong}`;
            document.getElementById('flashcardCounter').textContent = `${currentIndex + 1} / ${filtered.length}`;
            
            document.getElementById('flashcard').classList.remove('flipped');
            isFlipped = false;
        }

        function flipCard() {
            const card = document.getElementById('flashcard');
            if (isFlipped) {
                card.classList.remove('flipped');
            } else {
                card.classList.add('flipped');
            }
            isFlipped = !isFlipped;
        }

        function nextCard() {
            const filtered = getFilteredWords();
            currentIndex = (currentIndex + 1) % filtered.length;
            showFlashcard();
        }

        function previousCard() {
            const filtered = getFilteredWords();
            currentIndex = (currentIndex - 1 + filtered.length) % filtered.length;
            showFlashcard();
        }

        function showQuizQuestion() {
            const filtered = getFilteredWords();
            if (filtered.length === 0) return;
            
            const word = filtered[currentIndex];
            const isDeToPl = quizMode === 'quiz-de-pl';
            
            document.getElementById('questionLang').textContent = isDeToPl ? 'Deutsch' : 'Polski';
            document.getElementById('questionText').textContent = isDeToPl ? word.german : word.polish;
            document.getElementById('quizCounter').textContent = `${currentIndex + 1} / ${filtered.length}`;
            document.getElementById('quizStats').textContent = `Dobrze: ${word.correct} | ≈πle: ${word.wrong} (${getSuccessRate(word)}% sukcesu)`;
            
            document.getElementById('answerSection').classList.remove('hidden');
            document.getElementById('resultSection').classList.add('hidden');
            document.getElementById('answerInput').value = '';
            document.getElementById('answerInput').focus();
        }

        function checkAnswer() {
            const filtered = getFilteredWords();
            const word = filtered[currentIndex];
            const answer = document.getElementById('answerInput').value.trim();
            const isDeToPl = quizMode === 'quiz-de-pl';
            const correct = answer.toLowerCase() === (isDeToPl ? word.polish : word.german).toLowerCase();
            
            if (correct) {
                word.correct++;
            } else {
                word.wrong++;
            }
            
            saveData();
            
            const resultBox = document.getElementById('resultBox');
            resultBox.className = 'result ' + (correct ? 'correct' : 'wrong');
            resultBox.innerHTML = `
                <div class="result-title">${correct ? '‚úì Dobrze!' : '‚úó ≈πle'}</div>
                ${!correct ? `
                    <div style="font-size: 1.1em; color: #4a5568;">
                        <div>Twoja odpowied≈∫: <strong>${answer}</strong></div>
                        <div>Prawid≈Çowo: <strong style="color: #22543d;">${isDeToPl ? word.polish : word.german}</strong></div>
                    </div>
                ` : ''}
            `;
            
            document.getElementById('answerSection').classList.add('hidden');
            document.getElementById('resultSection').classList.remove('hidden');
        }

        function nextQuiz() {
            const filtered = getFilteredWords();
            currentIndex = (currentIndex + 1) % filtered.length;
            showQuizQuestion();
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ Enter
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('germanInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') addWord();
            });
            
            document.getElementById('polishInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') addWord();
            });
            
            document.getElementById('answerInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') checkAnswer();
            });
            
            loadData();
        });
    </script>
</body>
</html>
